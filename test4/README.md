# 实验4 图书管理系统顺序图绘制
## 图书管理系统的顺序图
### 1借书用例
#### 1.1借书用例PlantUML源码
>
``` usecase
@startuml
actor 图书管理员 as user
user->读者:验证读者
user->读者:查看读者图书限额
loop
user->图书种类:获取图书种类
图书种类->图书:查找图书
user->借书记录:创建借书记录
user->图书种类:借出资源
图书种类->图书:更改图书状态为不可借
user->图书种类:可借数量-1
user->读者:图书限额-1
end
user->借书记录:打印借书清单
@enduml
```
#### 1.2借书用例顺序图
![](./UML41.png '描述')
#### 1.3借书用例顺序图说明
先由图书管理员验证读者身份，并查看读者是否还有图书限额，以及该类图书的可借数量是否大于1，如果满足条件，查找读者所要的图书种类，并将图书借给读者，并创建借书记录，同时更新图书以及读者的状态，限额等信息
### 2还书用例
#### 2.1还书用例PlantUML源码
>
``` usecase
actor 图书管理员 as user

alt 归还图书
user->图书:读取图书信息
图书->借书记录:读取借书记录
借书记录->图书种类:读取图书种类
借书记录->读者:读取读者信息
user->图书:归还图书
user->读者:图书限额+1
user->图书种类:可借数量+1
user->借书记录:登记还书日期
user->图书:更改图书状态为未借
else 图书丢失
user->违规记录:违规类型为丢失图书
读者-->user:缴纳罚金
end
user->借书记录:读取应还时期以及归还日期
opt 逾期
user->违规记录:违规记录为逾期
读者-->user:缴纳罚金
end
@enduml
```
#### 2.2还书用例顺序图
![](./UML42.png '描述')
#### 2.3还书用例顺序图说明
如果读者归还图书，图书管理员通过归还的图书读取该图书的借书记录得到读者信息，并更新数据。如果读者图书丢失或者如果应还日期小于实际归还日期则违规，创建违规记录并向读者收取罚金
### 3查询书目用例
#### 3.1查询书目用例PlantUML源码
>
``` usecase
@startuml
actor 图书管理员 as user
actor 读者 as reader
loop
reader->图书管理系统:进入
图书管理系统->图书种类:查询
图书种类-->reader:返回图书信息
end
loop
user->图书管理系统:登录
图书管理系统->图书种类:查询
图书种类-->user:返回图书信息
user->图书种类:维护书目
end
@enduml

```
#### 3.2查询书目用例顺序图
![](./UML43.png '描述')
#### 3.3查询书目用例顺序图说明
图书管理员与读者都通过系统来查询图书信息，但是图书管理员不仅可以查询，还可以维护图书书目
### 4个人信息查询用例
#### 4.1个人信息查询用例PlantUML源码
>
``` usecase
@startuml
actor 读者 as reader
reader->图书管理系统
reader -> 图书管理系统:登录
图书管理系统->个人信息:查看
 个人信息-->reader:返回个人信息
@enduml
```
#### 4.2个人信息查询用例顺序图
![](./UML44.png '描述')
#### 4.3个人信息查询用例顺序图说明
读者需要登录系统才能查看个人信息
### 5预定图书用例
#### 5.1预定图书用例PlantUML源码
>
``` usecase
@startuml
actor 读者 as reader
reader->图书管理系统:登录
loop
图书管理系统->图书种类:查询图书种类
图书管理系统->预定记录:创建预定记录
图书管理系统->图书种类:可借数量-1
end
@enduml
```
#### 5.2预定图书用例顺序图
![](./UML45.png '描述')
#### 5.3预定图书用例顺序图说明
读者通过图书管理系统预定图书，与借书相比，预定图书时就算图书种类的可借数量为负数依旧可以预定